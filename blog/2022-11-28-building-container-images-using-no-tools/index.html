<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <script src="https://ravichaganti.com/js/view.js"></script>
    <script id="dsq-count-scr" src="//ravikanth.disqus.com/count.js" async></script>
    <link rel="stylesheet" href="https://ravichaganti.com/css/syntax.css">
    <meta name="author" content="Ravikanth Chaganti">
    <meta name="description" content="In a couple of earlier articles, we looked at Linux constructs used in building container images and the OCI image specification which standardizes the container image format. It is now time to understand how we can create container images. Knowing this is important to optimize the image size and building secure container images. And, of course, this knowledge also helps us appreciate what tools like Docker CLI or Buildah among many others help us achieve.">
    <meta name="keywords" content="blog,microsoft,mvp,powershell,automation,author, innovator, speaker">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building container images - using no tools"/>
<meta name="twitter:description" content="In a couple of earlier articles, we looked at Linux constructs used in building container images and the OCI image specification which standardizes the container image format. It is now time to understand how we can create container images. Knowing this is important to optimize the image size and building secure container images. And, of course, this knowledge also helps us appreciate what tools like Docker CLI or Buildah among many others help us achieve."/>

    <meta property="og:title" content="Building container images - using no tools" />
<meta property="og:description" content="In a couple of earlier articles, we looked at Linux constructs used in building container images and the OCI image specification which standardizes the container image format. It is now time to understand how we can create container images. Knowing this is important to optimize the image size and building secure container images. And, of course, this knowledge also helps us appreciate what tools like Docker CLI or Buildah among many others help us achieve." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ravichaganti.com/blog/2022-11-28-building-container-images-using-no-tools/" />
<meta property="article:published_time" content="2022-11-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-11-28T00:00:00+00:00" />



    
      <base href="https://ravichaganti.com/blog/2022-11-28-building-container-images-using-no-tools/">
    
    <title>
  Building container images - using no tools · Ravikanth Chaganti
</title>

    
      <link rel="canonical" href="https://ravichaganti.com/blog/2022-11-28-building-container-images-using-no-tools/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://ravichaganti.com/css/coder.min.897f2f761ca1c7df1614de4c088e4ebbb7f5984b520994e5ee0a0fc4ba52f7de.css" integrity="sha256-iX8vdhyhx98WFN5MCI5Ou7f1mEtSCZTl7goPxLpS994=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://ravichaganti.com/css/coder-dark.min.e78e80fc3a585a4d1c8fc7f58623b6ff852411e38431a9cd1792877ecaa160f6.css" integrity="sha256-546A/DpYWk0cj8f1hiO2/4UkEeOEManNF5KHfsqhYPY=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="https://ravichaganti.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://ravichaganti.com/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.73.0" />
  </head>

  
  
    
  
  
    <body onload="getViews( &#34;https://ravichaganti.com/blog/2022-11-28-building-container-images-using-no-tools/&#34; )" class="colorscheme-auto">
  
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://ravichaganti.com/">
      Ravikanth Chaganti
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://ravichaganti.com/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://ravichaganti.com/blog/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://ravichaganti.com/books/">Books</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Building container images - using no tools</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2022-11-28T00:00:00Z'>
                November 28, 2022
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              9-minute read
            </span>
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="https://ravichaganti.com/categories/oci/">oci</a>
      <span class="separator">•</span>
    <a href="https://ravichaganti.com/categories/containers/">containers</a></div>

          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://ravichaganti.com/tags/oci/">oci</a>
      <span class="separator">•</span>
    <a href="https://ravichaganti.com/tags/containers/">containers</a></div>

        </div>
        <div class="post-meta">
          <span class="reading-time">
            <i class="fas fa-comments"></i>
            <a href="https://ravichaganti.com/blog/2022-11-28-building-container-images-using-no-tools/#disqus_thread"> Comments</a>
          </span>
        </div>
        <div class="post-meta">
          <span class="reading-time">
            <i class="fas fa-eye"></i>
            <strong id="views"></strong>
            Readers
          </span>
        </div>        
      </header>
      <hr>
      <div>
        
        
        <p>In a couple of earlier articles, we looked at <a href="https://ravichaganti.com/blog/2022-10-18-understanding-container-images-the-fundamentals/">Linux constructs used in building container images</a> and the <a href="https://ravichaganti.com/blog/2022-10-28-understanding-container-images-oci-image-specification/">OCI image specification</a> which standardizes the container image format. It is now time to understand how we can create container images. Knowing this is important to optimize the image size and building secure container images. And, of course, this knowledge also helps us appreciate what tools like Docker CLI or Buildah among many others help us achieve. There are many tools to build container images. We shall look at each of these methods in-depth in later parts of <a href="https://ravichaganti.com/series/container-images/">this series of articles</a> on container images. For today, we will look into building container images using no tools! Actually, just using built-in OS tools.</p>
<p>As we learned already, a container image is a made up of layers packaged as tarballs. Each of these tarballs represent a portion of the file system that is needed for the application in the container to function. For example, here is how the <a href="https://hub.docker.com/_/golang">Golang image</a> looks like [on the file system] when you extract it using <a href="https://github.com/containers/skopeo">Skopeo</a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~$ cat index.json <span class="p">|</span> jq <span class="s1">&#39;.manifests[].digest&#39;</span>
<span class="s2">&#34;sha256:5e2f436ecda6b9f2ccdd912cfa462323100ba98e4399bdddb212f675d87fb85b&#34;</span>

vscode ➜ ~$ cat blobs/sha256/5e2f436ecda6b9f2ccdd912cfa462323100ba98e4399bdddb212f675d87fb85b <span class="p">|</span> jq <span class="s1">&#39;.config.digest&#39;</span>
<span class="s2">&#34;sha256:b47d5cbdc30315fb21d7299ceacc1146985c84230421fd5e4a07e8b009575a11&#34;</span>

vscode ➜ ~$ cat blobs/sha256/5e2f436ecda6b9f2ccdd912cfa462323100ba98e4399bdddb212f675d87fb85b <span class="p">|</span> jq <span class="s1">&#39;.layers[].digest&#39;</span>
<span class="s2">&#34;sha256:a8ca11554fce00d9177da2d76307bdc06df7faeb84529755c648ac4886192ed1&#34;</span>
<span class="s2">&#34;sha256:e4e46864aba2e62ba7c75965e4aa33ec856ee1b1074dda6b478101c577b63abd&#34;</span>
<span class="s2">&#34;sha256:c85a0be79bfba309d1f05dc40b447aa82b604593531fed1e7e12e4bef63483a5&#34;</span>
<span class="s2">&#34;sha256:195ea6a58ca87a18477965a6e6a8623112bde82c5b568a29c56ce4581b6e6695&#34;</span>
<span class="s2">&#34;sha256:52908dc1c386fab0271a2b84b6ef4d96205a98a8c8801169554767172e45d8c7&#34;</span>
<span class="s2">&#34;sha256:a2b47720d601b6c6c6e7763b4851e25475118d80a76be466ef3aa388abf2defd&#34;</span>
<span class="s2">&#34;sha256:14a70245b07c7f5056bdd90a3d93e37417ec26542def5a37ac8f19e437562533&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p><code>index.json</code> at the root of the OCI layout contains a pointer to the manifest that describes the configuration and layers within the image. As seen here, both manifest and image config have file&rsquo;s SHA256 hash as the file name and both files are JSON documents.</p>
<p>Image config, as we learned earlier, is what the container runtime uses to setup the container. It contains an ordered collection of file system layers and the execution parameters to create the container. What is important for our discussion is at the beginning of the configuration JSON. Here is an example from the golang image.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="err">vscode</span> <span class="err">➜</span> <span class="err">~$</span> <span class="err">cat</span> <span class="err">golang/blobs/sha</span><span class="mi">256</span><span class="err">/b</span><span class="mi">47</span><span class="err">d</span><span class="mi">5</span><span class="err">cbdc</span><span class="mi">30315</span><span class="err">fb</span><span class="mi">21</span><span class="err">d</span><span class="mi">7299</span><span class="err">ceacc</span><span class="mi">1146985</span><span class="err">c</span><span class="mi">84230421</span><span class="err">fd</span><span class="mf">5e4</span><span class="err">a</span><span class="mi">0</span><span class="mf">7e8</span><span class="err">b</span><span class="mi">009575</span><span class="err">a</span><span class="mi">11</span> <span class="err">|</span> <span class="err">jq</span> <span class="err">.</span>
<span class="p">{</span>
  <span class="nt">&#34;created&#34;</span><span class="p">:</span> <span class="s2">&#34;2022-11-16T04:16:44.241793636Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;architecture&#34;</span><span class="p">:</span> <span class="s2">&#34;amd64&#34;</span><span class="p">,</span>
  <span class="nt">&#34;os&#34;</span><span class="p">:</span> <span class="s2">&#34;linux&#34;</span><span class="p">,</span>
  <span class="nt">&#34;config&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;Env&#34;</span><span class="p">:</span> <span class="p">[</span>  <span class="s2">&#34;PATH=/go/bin:/usr/local/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#34;</span><span class="p">,</span>
      <span class="s2">&#34;GOLANG_VERSION=1.19.3&#34;</span><span class="p">,</span>
      <span class="s2">&#34;GOPATH=/go&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;Cmd&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;bash&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;WorkingDir&#34;</span><span class="p">:</span> <span class="s2">&#34;/go&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;rootfs&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;layers&#34;</span><span class="p">,</span>
    <span class="nt">&#34;diff_ids&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;sha256:ccba29d6937047c719a6c048a7038d3907590fbb8556418d119469b2ad4f95bc&#34;</span><span class="p">,</span>
      <span class="s2">&#34;sha256:f1c1f22985847a54884b1448b7e41f2852c7f4fab4b71014ba38cc2990cdc9f1&#34;</span><span class="p">,</span>
      <span class="s2">&#34;sha256:80231db1194c4e9941e3c4e00c704f527889863ea2222b691ff7f8583b912aa0&#34;</span><span class="p">,</span>
      <span class="s2">&#34;sha256:89c3244a87b279c98478c9248c9cbfba18ca16866e38c54f0134b31bbfd3ab27&#34;</span><span class="p">,</span>
      <span class="s2">&#34;sha256:6a7921805df03a2c5bbc8a24979077ce43b466d1b4ace36afd045e51fdbbe24f&#34;</span><span class="p">,</span>
      <span class="s2">&#34;sha256:de3f6c83fe06d179f2cdc189bd123dd159c78b2b80cd6739fde25988b1142925&#34;</span><span class="p">,</span>
      <span class="s2">&#34;sha256:6201ebf6567d8a29c3458610efb2b681fec4b8c127668d8d223f504520ed351e&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="err">....</span>
</code></pre></td></tr></table>
</div>
</div><p>Each layer in the image is a gzipped tarball, once again, containing the SHA256 hash as the file name. So, if we need to build a container image by hand, we need to really follow the same process of packaging each of our image layers. Let us look at that.</p>
<h3 id="building-a-hello-cloud-image">Building a hello-cloud image</h3>
<p>To understand the process of building a container image, we shall use a simple hello-cloud Go program. Our image will contain only one layer &ndash; the <code>hello-cloud</code> program. Here is our simple Go program.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;os&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">name</span> <span class="kt">string</span>

	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">{</span>
		<span class="nx">name</span> <span class="p">=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nx">name</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello, 🌍!&#34;</span><span class="p">)</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello,&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="s">&#34;👋&#34;</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Nothing fancy here. This program takes an optional input. This optional input can be your name or whatever you like. If there is no input, it prints Hello, 🌍!. You can build the binary using <code>go build hello-cloud.go</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ ./hello-cloud
Hello, 🌍!
vscode ➜ ~/hello-cloud$ ./hello-cloud <span class="s2">&#34;Cloud Native Central&#34;</span>
Hello, Cloud Native Central 👋
</code></pre></td></tr></table>
</div>
</div><p>Go programs are statically linked and therefore have no OS dependencies. Let us now look at creating a folder structure needed for this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ tree imageLayer/
imageLayer/
├── bin
└── tmp

<span class="m">2</span> directories, <span class="m">0</span> files
</code></pre></td></tr></table>
</div>
</div><p>We shall now move the hello-world binary into the bin folder.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ mv hello-cloud imageLayer/bin/

vscode ➜ ~/hello-cloud$ tree imageLayer/
imageLayer/
├── bin
│   └── hello-cloud
└── tmp
</code></pre></td></tr></table>
</div>
</div><p>We have the contents of our image layer ready. We can now package this into a gzipped tarball.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ <span class="nb">cd</span> imageLayer/

vscode ➜ ~/hello-cloud/imageLayer$ tar -czvf ../hello-cloud.tar.gz *
bin/
bin/hello-cloud
tmp/

vscode ➜ ~/hello-world/imageLayer$ tree ../
../
├── hello-cloud.tar.gz
└── imageLayer
    ├── bin
    │   └── hello-cloud
    └── tmp

<span class="m">3</span> directories, <span class="m">2</span> files
</code></pre></td></tr></table>
</div>
</div><p>This is good. However, to be able to run a container from this image layer, we need to feed tell the container runtime how to use the layers and the execution parameters to setup the container. So, let us step back a bit and see what the earlier example of golang image&rsquo;s configuration JSON contained. Every container image is specific to an operating system and architecture. The golang image that we pulled is a linux/amd64 image. Our <code>hello-cloud</code> binary is built on a Linux amd64 system as well.</p>
<p>To be able to invoke our <code>hello-cloud</code> binary, we need to set the right environment variables. Also, we want this binary to get invoked when the container starts. These environment and execution parameters needs to be within the config section of the configuration JSON.</p>
<p>So, here is how our configuration JSON will start.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;architecture&#34;</span><span class="p">:</span> <span class="s2">&#34;amd64&#34;</span><span class="p">,</span>
    <span class="nt">&#34;os&#34;</span><span class="p">:</span> <span class="s2">&#34;linux&#34;</span><span class="p">,</span>
    <span class="nt">&#34;config&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;Env&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;PATH=/bin&#34;</span><span class="p">],</span>
      <span class="nt">&#34;Entrypoint&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&#34;hello-cloud&#34;</span>
      <span class="p">],</span>
      <span class="nt">&#34;Cmd&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&#34;Cloud Native Central!&#34;</span>
      <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>We set the <code>Entrypoint</code> to the hello-world binary and the <code>Cmd</code> array to a single argument that will be passed to the binary.</p>
<p>The next important thing that needs to be added is the <a href="https://github.com/opencontainers/image-spec/blob/main/config.md#layer-diffid">DiffID</a> of the image layer. The diff ID is the digest over the layer&rsquo;s uncompressed tarball. We can obtainthis using the <code>sha256sum</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~$ gunzip &lt; hello-world/hello-cloud.tar.gz <span class="p">|</span> sha256sum
690fa2812df903a4cee676e28389e154fe022f2a26fb29c4c97e9c6583fa5bc6  -
</code></pre></td></tr></table>
</div>
</div><p>We need to add the serialized version of this digest to the configuration JSON. So, here is how our final configuration JSON looks like.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;architecture&#34;</span><span class="p">:</span> <span class="s2">&#34;amd64&#34;</span><span class="p">,</span>
  <span class="nt">&#34;os&#34;</span><span class="p">:</span> <span class="s2">&#34;linux&#34;</span><span class="p">,</span>
  <span class="nt">&#34;config&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;Env&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;PATH=/bin&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;Entrypoint&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;hello-cloud&#34;</span>
    <span class="p">],</span>
    <span class="nt">&#34;Cmd&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;Cloud Native Central!&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;rootfs&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;layers&#34;</span><span class="p">,</span>
    <span class="nt">&#34;diff_ids&#34;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&#34;sha256:690fa2812df903a4cee676e28389e154fe022f2a26fb29c4c97e9c6583fa5bc6&#34;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&#34;history&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;created_by&#34;</span><span class="p">:</span> <span class="s2">&#34;Ravikanth C&#34;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>As we saw in the golang image example earlier, we need a manifest that combines configuration JSON and the layers. These artifacts are referenced using their digest values as well. So, let us generate the digests for both configuration JSON and the layer tar.gz. We will also need the size in bytes which can be derived from the <code>ls</code> output. The layer digest is different from the DiffID we captured earlier. The <a href="https://github.com/opencontainers/image-spec/blob/main/manifest.md#image-manifest-property-descriptions">layer digest</a> identifies the compressed content and DiffID, as mentioned earlier, identifies the uncompressed content. Container runtimes deal with uncompressed layer content and therefore the configuration JSON must include the digest of the uncompressed layer.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ sha256sum &lt; hello-world.tar.gz
e251e682f7e64cff127020015be3254313b3a7900f54d82ecf34653192be4c21  -

vscode ➜ ~/hello-cloud$ sha256sum &lt; configuration.json
da17376c4c02667544fb07a8788cfa4c294f89464534d3a76a45ee004cebacf5  -

vscode ➜ ~/hello-cloud$ ls -l
total <span class="m">1064</span>
-rw-r--r-- <span class="m">1</span> rchaganti rchaganti     <span class="m">364</span> Nov <span class="m">27</span> 13:19 configuration.json
-rw-r--r-- <span class="m">1</span> rchaganti rchaganti <span class="m">1074934</span> Nov <span class="m">27</span> 13:42 hello-world.tar.gz
drwxr-xr-x <span class="m">4</span> rchaganti rchaganti    <span class="m">4096</span> Nov <span class="m">27</span> 11:11 imageLayer
</code></pre></td></tr></table>
</div>
</div><p>We need to add the appropriate <a href="https://github.com/opencontainers/image-spec/blob/main/media-types.md">mediaType</a> for both configuration JSON and each layer. Here is how our manifest.json looks like.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;schemaVersion&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&#34;mediaType&#34;</span><span class="p">:</span> <span class="s2">&#34;application/vnd.oci.image.manifest.v1+json&#34;</span><span class="p">,</span>
  <span class="nt">&#34;config&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;mediaType&#34;</span><span class="p">:</span> <span class="s2">&#34;application/vnd.oci.image.config.v1+json&#34;</span><span class="p">,</span>
    <span class="nt">&#34;size&#34;</span><span class="p">:</span> <span class="mi">277</span><span class="p">,</span>
    <span class="nt">&#34;digest&#34;</span><span class="p">:</span> <span class="s2">&#34;sha256:da17376c4c02667544fb07a8788cfa4c294f89464534d3a76a45ee004cebacf5&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;layers&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&#34;mediaType&#34;</span><span class="p">:</span> <span class="s2">&#34;application/vnd.oci.image.layer.v1.tar+gzip&#34;</span><span class="p">,</span>
      <span class="nt">&#34;size&#34;</span><span class="p">:</span> <span class="mi">1074934</span><span class="p">,</span>
      <span class="nt">&#34;digest&#34;</span><span class="p">:</span> <span class="s2">&#34;sha256:e251e682f7e64cff127020015be3254313b3a7900f54d82ecf34653192be4c21&#34;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Alright. Do we have the image ready? Not quite yet. We need to push it to an image registry. While, on surface, it looks like a container image is a singular entity but in reality it is not. As we have already seen, a container image includes a bunch of layers, a configuration, and a manifest. When Docker CLI or any other tool pushes images to a registry, these tools do so in a specific sequence. Since we are building this without any tools such as Docker CLI, we need to push these artifacts manually using the <a href="https://docs.docker.com/registry/spec/api/#introduction">Docker registry HTTP API</a>.</p>
<p>Here is the workflow.</p>
<p>
<link rel="stylesheet" href="https://ravichaganti.com/css/hugo-easy-gallery.css" />
<div class="box" style="max-width:450px">
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://ravichaganti.com/images/container-push.png" />
    </div>
    <a href="https://ravichaganti.com/images/container-push.png" itemprop="contentUrl"></a>
  </figure>
</div>
 



  


<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://ravichaganti.com/js/load-photoswipe.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>
</p>
<p>Let us start. We need to first <a href="https://docs.docker.com/registry/spec/auth/token/#how-to-authenticate">authenticate with Docker Hub</a>. There are many ways to do this but we will use token authentication.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ <span class="nv">USERNAME</span><span class="o">=</span>ravikanth
vscode ➜ ~/hello-cloud$ <span class="nv">REPO</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">USERNAME</span><span class="si">}</span><span class="s2">/hello-cloud&#34;</span>
vscode ➜ ~/hello-cloud$ <span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>curl -v -u <span class="s2">&#34;</span><span class="nv">$USERNAME</span><span class="s2">&#34;</span> <span class="s2">&#34;https://auth.docker.io/token?service=registry.docker.io&amp;scope=repository:</span><span class="nv">$REPO</span><span class="s2">:pull,push&#34;</span> <span class="p">|</span> jq <span class="s1">&#39;.token&#39;</span> <span class="p">|</span> cut -d<span class="se">\&#34;</span> -f2<span class="k">)</span>
</code></pre></td></tr></table>
</div>
</div><p>The above command will prompt for a password to authenticate with Docker Hub and retrieve the token from the response.</p>
<h3 id="upload-blobs">Upload blobs</h3>
<p>Once we have the auth token, we need to upload each blob (layers and configuration JSON) to the repository. Let us start with hello-world.tar.gz.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ <span class="nv">LOCATION</span><span class="o">=</span><span class="k">$(</span>curl -i https://registry.hub.docker.com/v2/<span class="nv">$REPO</span>/blobs/uploads/ -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> -d <span class="s1">&#39;&#39;</span> <span class="p">|</span> grep location <span class="p">|</span> cut -d<span class="s2">&#34; &#34;</span> -f2 <span class="p">|</span> tr -d <span class="s1">&#39;\r&#39;</span><span class="k">)</span>

vscode ➜ ~/hello-cloud$ <span class="nv">LOCATION</span><span class="o">=</span><span class="k">$(</span>curl -i <span class="nv">$LOCATION</span> -X PATCH -H <span class="s2">&#34;Content-Length: </span><span class="nv">$LAYERSIZE</span><span class="s2">&#34;</span> -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> -H <span class="s2">&#34;Content-Type: application/octet-stream&#34;</span> --data-binary @e251e682f7e64cff127020015be3254313b3a7900f54d82ecf34653192be4c21 <span class="p">|</span> grep location <span class="p">|</span> cut -d<span class="s2">&#34; &#34;</span> -f2 <span class="p">|</span> tr -d <span class="s1">&#39;\r&#39;</span><span class="k">)</span>

vscode ➜ ~/hello-cloud$ curl <span class="s2">&#34;</span><span class="nv">$LOCATION</span><span class="s2">&amp;digest=sha256:</span><span class="nv">$LAYERDIGEST</span><span class="s2">&#34;</span> -X PUT -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> -v
</code></pre></td></tr></table>
</div>
</div><p>The first command starts an upload and retrieves the location for the upload. The second command uses the location from first command and uploads the blob. Finally, the third command commits the upload at the location returned by second command and specifies the digest of the blob.</p>
<p>we just need to repeat these steps for each layer and configuration JSON. Since we have only one layer, let us just push the configuration JSON as well.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ <span class="nv">LOCATION</span><span class="o">=</span><span class="k">$(</span>curl -i https://registry.hub.docker.com/v2/<span class="nv">$REPO</span>/blobs/uploads/ -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> -d <span class="s1">&#39;&#39;</span> <span class="p">|</span> grep location <span class="p">|</span> cut -d<span class="s2">&#34; &#34;</span> -f2 <span class="p">|</span> tr -d <span class="s1">&#39;\r&#39;</span><span class="k">)</span>

vscode ➜ ~/hello-cloud$ <span class="nv">LOCATION</span><span class="o">=</span><span class="k">$(</span>curl -i <span class="nv">$LOCATION</span> -X PATCH -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> -H <span class="s2">&#34;Content-Type: application/octet-stream&#34;</span> --data-binary @4500bf72b8876e180985cb9d30dcbfb4b37c6212af4a1e66f6a59e9c44e4430e <span class="p">|</span> grep location <span class="p">|</span> cut -d<span class="s2">&#34; &#34;</span> -f2 <span class="p">|</span> tr -d <span class="s1">&#39;\r&#39;</span><span class="k">)</span>

vscode ➜ ~/hello-cloud$ curl <span class="s2">&#34;</span><span class="nv">$LOCATION</span><span class="s2">&amp;digest=sha256:</span><span class="nv">$CONFIGDIGEST</span><span class="s2">&#34;</span> -X PUT -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> -v
</code></pre></td></tr></table>
</div>
</div><h3 id="upload-the-manifest">Upload the manifest</h3>
<p>Finally, we need to upload the manifest.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~/hello-cloud$ curl <span class="s2">&#34;https://registry.hub.docker.com/v2/</span><span class="nv">$REPO</span><span class="s2">/manifests/latest&#34;</span> -X PUT -H <span class="s2">&#34;Content-Type: application/vnd.oci.image.manifest.v1+json&#34;</span> -H <span class="s2">&#34;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&#34;</span> --data-binary @manifest.json -v
</code></pre></td></tr></table>
</div>
</div><p>Once the manifest upload is complete, you can find the image on Docker Hub.</p>


<div class="box" style="max-width:450px">
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="https://ravichaganti.com/images/container-dockerhub.png" />
    </div>
    <a href="https://ravichaganti.com/images/container-dockerhub.png" itemprop="contentUrl"></a>
  </figure>
</div>

<p>Can we not run the image we created without pushing it to Docker Hub or another registry? We can! Let us save that for a different day. For now, we will pull the image we just pushed and try to run a container.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vscode ➜ ~$ docker pull ravikanth/hello-cloud:latest
latest: Pulling from ravikanth/hello-cloud
Digest: sha256:a23f26c0df0206f3135ca7c7c02d896b9d9fa43373fb6f5c8be8c7615b4e4402
Status: Image is up to date <span class="k">for</span> ravikanth/hello-cloud:latest
docker.io/ravikanth/hello-cloud:latest

vscode ➜ ~$ docker run ravikanth/hello-cloud:latest
Hello, Cloud Native Central! 👋

vscode ➜ ~$ docker run ravikanth/hello-cloud:latest Readers!
Hello, Readers! 👋
</code></pre></td></tr></table>
</div>
</div><p>This is it! What&rsquo;s next? We shall look at some tools to build these container images. Stay tuned.</p>

        

<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
position: relative;
text-align: left; 
height: 36px; 
width: 32px; 
float: left; 
text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span style="color: rgb(77, 77, 95);">Share on: </span><div id="share-buttons">
<div class="facebook" title="Share this on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https:\/\/ravichaganti.com\/blog\/2022-11-28-building-container-images-using-no-tools\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
<div class="twitter" title="Share this on Twitter" onclick="window.open('https://twitter.com/intent/tweet?text=https:\/\/ravichaganti.com\/blog\/2022-11-28-building-container-images-using-no-tools\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
<div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/sharing/share-offsite/?url=https:\/\/ravichaganti.com\/blog\/2022-11-28-building-container-images-using-no-tools\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
<div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=https:\/\/ravichaganti.com\/blog\/2022-11-28-building-container-images-using-no-tools\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>
        <script src="https://giscus.app/client.js"
        data-repo="rchaganti/rchaganti.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyNzcwNTE0Mjc="
        data-category="Announcements"
        data-category-id="DIC_kwDOEIN4I84CS4rW"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
      <h3>See also in container images</h3>
      <nav>
        <ul>
        
        
          
        
          
            <li>
              <a href="https://ravichaganti.com/blog/2022-10-28-understanding-container-images-oci-image-specification/">Understanding container images - OCI image specification</a>
            </li>
          
        
          
            <li>
              <a href="https://ravichaganti.com/blog/2022-10-18-understanding-container-images-the-fundamentals/">Understanding container images - The fundamentals</a>
            </li>
          
        
        </ul>
      </nav>
    
  
</section>


        
        <script data-goatcounter="https://ravichaganti.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
      </footer>
    </article>

    
  </section>

      </div>
      <script data-goatcounter="https://ravichaganti.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
      
  <footer class="footer">
    <section class="container">
      
        <p>All Rights Reserved.</p>
      
      
        ©
        
          2019 -
        
        2023
         Ravikanth Chaganti 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a> and hosted using <a href="https://pages.github.com/">GitHub Pages</a>.
      
      
    </section>
  </footer>

    </main>

        
    
    

  </body>

</html>
